<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cuestionario (10 preguntas)</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; max-width: 900px; margin: 24px auto; padding: 0 16px; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 16px; margin: 14px 0; }
    .opt { display:block; margin: 8px 0; }
    .row { display:flex; gap:12px; flex-wrap:wrap; margin: 14px 0; }
    button { padding: 10px 14px; border-radius: 10px; border: 1px solid #333; background: #fff; cursor: pointer; }
    button:hover { background: #f3f3f3; }
    .ok { color: #0a7a0a; font-weight: 700; }
    .bad { color: #b00020; font-weight: 700; }
    .muted { color: #666; }
  </style>
</head>
<body>
  <h1>Cuestionario (10 preguntas)</h1>
  <p class="muted">Las preguntas se mezclan automÃ¡ticamente. Contesta y presiona <b>Calificar</b>.</p>

  <div id="quiz"></div>

  <div class="row">
    <button id="grade">Calificar</button>
    <button id="reset" type="button">Reiniciar</button>
  </div>

  <h2 id="score"></h2>
  <div id="review"></div>

<script>
const basePreguntas = [{"pregunta": "1) Â¿CuÃ¡les son las cuatro funciones sustantivas de un servicio estadÃ­stico?", "opciones": {"A": "GeneraciÃ³n de estadÃ­sticas bÃ¡sicas, generaciÃ³n de estadÃ­sticas derivadas, integraciÃ³n de estadÃ­sticas, divulgaciÃ³n", "B": "PlaneaciÃ³n, presupuestaciÃ³n, auditorÃ­a, evaluaciÃ³n", "C": "RecaudaciÃ³n, inspecciÃ³n, sanciÃ³n, fiscalizaciÃ³n", "D": "DiseÃ±o grÃ¡fico, impresiÃ³n, distribuciÃ³n, ventas"}, "respuesta": "A", "explicacion": "Las 4 funciones: estadÃ­sticas bÃ¡sicas, derivadas, integraciÃ³n y divulgaciÃ³n."}, {"pregunta": "2) Â¿QuÃ© describe mejor la generaciÃ³n de estadÃ­sticas bÃ¡sicas?", "opciones": {"A": "Crear indicadores usando metodologÃ­as ajenas a la fuente original", "B": "Aplicar cuestionarios o formatos a toda la poblaciÃ³n o a una muestra para cuantificar y caracterizar", "C": "Ordenar datos de distintas fuentes para facilitar consulta", "D": "Promocionar resultados en medios masivos"}, "respuesta": "B", "explicacion": "Las bÃ¡sicas se obtienen directamente (censos, encuestas, registros) sin conceptualizaciones ajenas al proyecto."}, {"pregunta": "3) Â¿QuÃ© incluye la generaciÃ³n de estadÃ­sticas bÃ¡sicas segÃºn el texto?", "opciones": {"A": "Censos, encuestas por muestreo y registros administrativos", "B": "Ãšnicamente censos", "C": "Solo encuestas en lÃ­nea", "D": "Solo contabilidad nacional"}, "respuesta": "A", "explicacion": "Se incluyen censos, encuestas por muestreo y registros administrativos."}, {"pregunta": "4) Â¿QuÃ© es un censo (en este contexto)?", "opciones": {"A": "Un estudio de opiniÃ³n con muestra pequeÃ±a", "B": "Un registro continuo de trÃ¡mites administrativos", "C": "ObtenciÃ³n de datos individuales de todos los elementos del conjunto de estudio en un momento/periodo especÃ­fico", "D": "Una combinaciÃ³n de varias fuentes con metodologÃ­as externas"}, "respuesta": "C", "explicacion": "El censo cubre a todos los elementos del conjunto de estudio en un momento/periodo definido."}, {"pregunta": "5) Â¿CuÃ¡les son caracterÃ­sticas clave de un censo mencionadas en el texto?", "opciones": {"A": "Aleatoriedad, confidencialidad, panel", "B": "Universalidad, exhaustividad, simultaneidad", "C": "Rentabilidad, rapidez, anonimato", "D": "Publicidad, repeticiÃ³n, representatividad"}, "respuesta": "B", "explicacion": "El texto resalta universalidad, exhaustividad y simultaneidad."}, {"pregunta": "6) Â¿QuÃ© describe mejor una encuesta por muestreo?", "opciones": {"A": "Selecciona una muestra representativa con procedimientos tÃ©cnicos para inferir resultados a la poblaciÃ³n con cierta precisiÃ³n", "B": "Mide a todos los elementos sin excepciÃ³n", "C": "Solo usa registros administrativos sin ajuste alguno", "D": "Solo ordena series histÃ³ricas ya publicadas"}, "respuesta": "A", "explicacion": "La encuesta por muestreo usa una muestra representativa para inferir resultados a la poblaciÃ³n."}, {"pregunta": "7) SegÃºn el texto, una limitaciÃ³n comÃºn de las encuestas (vs censos o registros) es queâ€¦", "opciones": {"A": "No permiten estimaciones", "B": "Tienen menor posibilidad de desglose geogrÃ¡fico", "C": "Siempre cuestan mÃ¡s que un censo", "D": "No requieren marco ni diseÃ±o muestral"}, "respuesta": "B", "explicacion": "Se menciona menor posibilidad de desglose geogrÃ¡fico que censos o registros."}, {"pregunta": "8) Â¿QuÃ© caracteriza el aprovechamiento de registros administrativos para fines estadÃ­sticos?", "opciones": {"A": "Se generan solo con entrevistas cara a cara", "B": "Son registros continuos de hechos/sucesos; suelen tener costo marginal y cobertura limitada al Ã¡mbito legal del registro", "C": "Siempre tienen cobertura temÃ¡tica ilimitada", "D": "No requieren ajustes ni integraciÃ³n de bases"}, "respuesta": "B", "explicacion": "Registros continuos, costo marginal y lÃ­mites por el Ã¡mbito legal/administrativo; suelen requerir ajustes para uso estadÃ­stico."}, {"pregunta": "9) Â¿QuÃ© son las estadÃ­sticas derivadas?", "opciones": {"A": "Las que se obtienen aplicando cuestionarios a toda la poblaciÃ³n", "B": "Las que se producen usando estadÃ­sticas de una o varias fuentes, aplicando conceptualizaciones o metodologÃ­as ajenas a las fuentes originales", "C": "Las que solo se publican en medios masivos", "D": "Las que provienen Ãºnicamente de registros administrativos sin procesamiento"}, "respuesta": "B", "explicacion": "Derivadas = usar una o varias fuentes y aplicar conceptualizaciones/metodologÃ­as ajenas a las fuentes originales."}, {"pregunta": "10) Â¿QuÃ© describe mejor la divulgaciÃ³n en un servicio estadÃ­stico?", "opciones": {"A": "Actividades para hacer llegar la informaciÃ³n a los usuarios (p. ej., comercializaciÃ³n, centros de consulta, atenciÃ³n de requerimientos, medios, redes)", "B": "Seleccionar la muestra y levantar la encuesta", "C": "Calcular indicadores complejos como contabilidad nacional", "D": "Ordenar bases de datos internas sin publicarlas"}, "respuesta": "A", "explicacion": "DivulgaciÃ³n = hacer llegar la informaciÃ³n al usuario por distintos medios/mecanismos."}];

function shuffle(arr) {
  // Fisher-Yates
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

let preguntas = [];

function renderQuiz() {
  const quizDiv = document.getElementById("quiz");
  quizDiv.innerHTML = "";

  // Copia profunda para no alterar el original
  preguntas = JSON.parse(JSON.stringify(basePreguntas));
  shuffle(preguntas);

  preguntas.forEach((p, idx) => {
    const card = document.createElement("div");
    card.className = "card";

    const h = document.createElement("h3");
    h.textContent = p.pregunta;
    card.appendChild(h);

    const opts = p.opciones;
    Object.keys(opts).forEach(letter => {
      const label = document.createElement("label");
      label.className = "opt";
      label.innerHTML = `
        <input type="radio" name="q${idx}" value="${letter}">
        <b>${letter})</b> ${opts[letter]}
      `;
      card.appendChild(label);
    });

    quizDiv.appendChild(card);
  });

  // limpiar resultados
  document.getElementById("score").textContent = "";
  document.getElementById("review").innerHTML = "";
}

function gradeQuiz() {
  let aciertos = 0;
  const falladas = [];

  preguntas.forEach((p, idx) => {
    const picked = document.querySelector(`input[name="q${idx}"]:checked`);
    const resp = picked ? picked.value : null;

    if (resp === p.respuesta) {
      aciertos += 1;
    } else {
      falladas.push({
        pregunta: p.pregunta,
        tu: resp,
        ok: p.respuesta,
        explicacion: p.explicacion
      });
    }
  });

  document.getElementById("score").textContent =
    `Resultado: ${aciertos}/${preguntas.length}  (CalificaciÃ³n: ${aciertos*10}/100)`;

  const review = document.getElementById("review");
  review.innerHTML = "";

  if (falladas.length) {
    const title = document.createElement("h3");
    title.textContent = "RevisiÃ³n de falladas";
    review.appendChild(title);

    falladas.forEach(f => {
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `
        <div><b>${f.pregunta}</b></div>
        <div class="bad">Tu respuesta: ${f.tu ?? "Sin responder"}</div>
        <div class="ok">Correcta: ${f.ok}</div>
        <div class="muted">ExplicaciÃ³n: ${f.explicacion}</div>
      `;
      review.appendChild(div);
    });
  } else {
    const p = document.createElement("p");
    p.className = "ok";
    p.textContent = "Â¡Perfecto! No fallaste ninguna ðŸ˜„";
    review.appendChild(p);
  }
}

document.getElementById("grade").addEventListener("click", gradeQuiz);
document.getElementById("reset").addEventListener("click", renderQuiz);

// Mezcla al cargar
renderQuiz();
</script>
</body>
</html>
